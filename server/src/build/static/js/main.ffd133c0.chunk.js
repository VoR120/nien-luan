(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[5],{103:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"d",(function(){return d})),r.d(t,"c",(function(){return p})),r.d(t,"e",(function(){return O})),r.d(t,"b",(function(){return b}));var a=r(8),n=r(4),c=r.n(n),o=r(1),u=r(6),s=r(9),i=r(13),l=function(){var e=Object(u.a)(c.a.mark((function e(t){var r,a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),r=t.items.map((function(e){var t=Object(o.a)({},e);return t.productId=e.product._id,delete t.product,delete t._id,t})),t.items=r,e.prev=3,a={method:"POST",url:"/api/addOrder",data:t},e.next=7,Object(s.a)(a);case 7:n=e.sent,console.log(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(u.a)(c.a.mark((function e(t){var r,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"GET_ORDER_REQUEST"}),r={method:"GET",url:"/api/getOrder/"},e.next=5,Object(s.a)(r);case 5:return n=e.sent,o=Object(a.a)(n.data.order),e.next=9,Promise.all(n.data.order.map(function(){var e=Object(u.a)(c.a.mark((function e(t,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/api/user/address/getbyid/"+t.addressId);case 2:a=e.sent,o[r].address=a.data.address[0];case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 9:console.log(o),t({type:"GET_ORDER_SUCCESS",payload:{orders:o}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(c.a.mark((function e(t){var r,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"GET_ALL_ORDER_REQUEST"}),r={method:"GET",url:"/api/getAllOrder/"},e.next=5,Object(i.a)(r);case 5:return n=e.sent,o=Object(a.a)(n.data.order),e.next=9,Promise.all(n.data.order.map(function(){var e=Object(u.a)(c.a.mark((function e(t,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/api/user/address/getbyid/"+t.addressId);case 2:a=e.sent,o[r].address=a.data.address[0];case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 9:console.log(o),t({type:"GET_ALL_ORDER_SUCCESS",payload:{orders:o}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(c.a.mark((function e(t,r){var a,n,u,s,l,d,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(r),a=r._id,n=r.items,u=r.orderStatus,s=u.find((function(e){return!e.isCompleted})).type,e.prev=3,t({type:"UPDATE_ORDER_REQUEST"}),e.next=7,i.a.put("/api/updateOrder",{_id:a,items:n,type:s});case 7:return l=e.sent,console.log(l),d=Object(o.a)({},l.data.order),e.next=12,i.a.get("/api/user/address/getbyid/"+d.addressId);case 12:p=e.sent,d.address=p.data.address[0],200==l.status&&t({type:"UPDATE_ORDER_SUCCESS",payload:{order:d}}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),console.log(e.t0.response.data);case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t,r){return e.apply(this,arguments)}}(),b=function(){var e=Object(u.a)(c.a.mark((function e(t,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.put("/api/cancelOrder",{_id:t.id,type:r});case 3:if(a=e.sent,console.log(a),200!=a.status){e.next=7;break}return e.abrupt("return",a);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}()},104:function(e,t,r){"use strict";var a=r(10),n=r(0),c=r(1),o={product:null,loading:!1,error:null},u=function(e,t){switch(console.log(t),t.type){case"GET_PRODUCT_DETAIL_REQUEST":return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case"GET_PRODUCT_DETAIL_SUCCESS":return Object(c.a)(Object(c.a)({},e),{},{product:t.payload.product,loading:!1});case"DELETE_PRODUCT_DETAIL_SUCCESS":return Object(c.a)({},o);default:return o}},s=r(2),i=Object(n.createContext)();t.a=function(e){var t=Object(n.useReducer)(u,o),r=Object(a.a)(t,2),c=r[0],l=r[1];return Object(s.jsx)(i.Provider,{value:{productDetail:c,productDetailDispatch:l},children:e.children})}},114:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r(10),n=r(0),c=r(1),o={orders:[],loading:!1,error:null},u=function(e,t){switch(console.log("Order  action: ",t),t.type){case"GET_ORDER_REQUEST":return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case"GET_ORDER_SUCCESS":return Object(c.a)(Object(c.a)({},e),{},{orders:t.payload.orders,loading:!1});default:return o}},s=r(2),i=Object(n.createContext)();t.b=function(e){var t=Object(n.useReducer)(u,o),r=Object(a.a)(t,2),c=r[0],l=r[1];return Object(s.jsx)(i.Provider,{value:{order:c,orderDispatch:l},children:e.children})}},13:function(e,t,r){"use strict";var a=r(66),n=r.n(a),c=r(67),o=JSON.parse(window.localStorage.getItem("a_token"));console.log(o);var u=n.a.create({baseURL:c.a});t.a=u},157:function(e,t,r){},160:function(e,t,r){},161:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(40),o=r.n(c),u=r(174),s=r(176),i=r(194),l=r(11),d=r(32),p=r(96),O=r(63),b=r(4),f=r.n(b),E=r(8),j=r(6),g=r(13),_=function(e){var t=e.length;return{rate:e.reduce((function(e,t){return Number(e)+Number(t.rating)}),0)/t||0,quantity:t}},h=function(){var e=Object(j.a)(f.a.mark((function e(t,r){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"GET_ALL_CATEGORY_REQUEST"}),r({type:"GET_ALL_PRODUCT_REQUEST"}),e.next=5,g.a.get("/api/initialData/get");case 5:if(200!==(a=e.sent).status){e.next=15;break}return n=Object(E.a)(a.data.product),a.data.product.map((function(e,t){n[t].ratingView=_(e.ratings)})),e.next=11,t({type:"GET_ALL_CATEGORY_SUCCESS",payload:{categories:a.data.category}});case 11:return e.next=13,r({type:"GET_ALL_PRODUCT_SUCCESS",payload:{products:n}});case 13:e.next=19;break;case 15:return e.next=17,t({type:"GET_ALL_CATEGORY_FAILED",payload:{error:a.data.error}});case 17:return e.next=19,r({type:"GET_ALL_PRODUCT_FAILED",payload:{error:a.data.error}});case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,r){return e.apply(this,arguments)}}(),S=r(103),y=r(97);var m=Object(l.i)((function(e){var t=e.history;return Object(a.useEffect)((function(){var e=t.listen((function(){window.scrollTo(0,0)}));return function(){e()}}),[]),null})),v=r(1),T=r(45),R=r(2),x=["component"],C=function(e){var t=e.component,r=Object(T.a)(e,x);return Object(R.jsx)(l.b,Object(v.a)(Object(v.a)({},r),{},{component:function(e){return localStorage.getItem("a_token")?Object(R.jsx)(t,Object(v.a)({},e)):Object(R.jsx)(l.a,{to:"/admin/login"})}}))},D=["component"],U=function(e){var t=e.component,r=Object(T.a)(e,D);return Object(R.jsx)(l.b,Object(v.a)(Object(v.a)({},r),{},{component:function(e){return localStorage.getItem("token")?Object(R.jsx)(t,Object(v.a)({},e)):Object(R.jsx)(l.a,{to:"/login"})}}))},A=["component","path","isPrivate","isPrivateAdmin"],I=function(e){return Object(R.jsx)(a.Fragment,{children:e.routes.map((function(e){var t=e.component,r=e.path,a=e.isPrivate,n=e.isPrivateAdmin,c=Object(T.a)(e,A);return n?Object(R.jsx)(C,Object(v.a)({component:t,path:r},c),r):a?Object(R.jsx)(U,Object(v.a)({component:t,path:r},c),r):Object(R.jsx)(l.b,Object(v.a)({component:t,path:r},c),r)}))})},k=r(64),P=r(59),w=r(61),L=r(65),G=r(60),N=r(48),Q=[{path:"/product",exact:!1,component:Object(a.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(8)]).then(r.bind(null,811))})),isPrivateAdmin:!0},{path:"/category",exact:!1,component:Object(a.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(7)]).then(r.bind(null,812))})),isPrivateAdmin:!0},{path:"/admin/login",exact:!1,component:Object(a.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(21)]).then(r.bind(null,802))}))},{path:"/admin/register",exact:!1,component:Object(a.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(22)]).then(r.bind(null,803))}))},{path:"/aorder",exact:!0,component:Object(a.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(10)]).then(r.bind(null,804))})),isPrivateAdmin:!0},{path:"/customer",exact:!0,component:Object(a.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(9)]).then(r.bind(null,813))})),isPrivateAdmin:!0},{path:"/admin",exact:!0,component:Object(a.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(19),r.e(25)]).then(r.bind(null,805))})),isPrivateAdmin:!0},{path:"/",exact:!0,component:Object(a.lazy)((function(){return Promise.all([r.e(0),r.e(4),r.e(15),r.e(23)]).then(r.bind(null,808))}))},{path:"/productdetail/:slug",exact:!1,component:Object(a.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(12)]).then(r.bind(null,809))}))},{path:"/collection/:category",exact:!0,component:Object(a.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(4),r.e(16)]).then(r.bind(null,814))}))},{path:"/cart",exact:!0,component:Object(a.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(17)]).then(r.bind(null,815))}))},{path:"/order",exact:!0,component:Object(a.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(18)]).then(r.bind(null,810))})),isPrivate:!0},{path:"/login",exact:!0,component:Object(a.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(24)]).then(r.bind(null,806))}))},{path:"/register",exact:!0,component:Object(a.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(20)]).then(r.bind(null,807))}))},{path:"/info",exact:!0,component:Object(a.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(14)]).then(r.bind(null,816))})),isPrivate:!0},{path:"/myorder",exact:!0,component:Object(a.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(13)]).then(r.bind(null,817))})),isPrivate:!0}],z=(r(157),r(93)),F=Object(i.a)((function(e){return{backdrop:{background:"#fff",zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var J=function(){var e=F(),t=Object(a.useContext)(k.a),r=t.aUser,n=t.aDispatch,c=Object(a.useContext)(N.a),o=c.user,i=c.dispatch,b=Object(a.useContext)(w.a).categoryDispatch,f=Object(a.useContext)(L.a).orderAdminDispatch,E=Object(a.useContext)(P.a),j=(E.cart,E.cartDispatch),g=Object(a.useContext)(G.a).productDispatch;return Object(a.useEffect)((function(){if(Object(p.d)(n),!r.isAuthenticated)return Object(R.jsx)(l.a,{to:"/admin/login"})}),[]),Object(a.useEffect)((function(){r.isAuthenticated&&(h(b,g),Object(S.c)(f))}),[r.isAuthenticated]),Object(a.useEffect)((function(){if(Object(y.b)(i),Object(z.c)(g),Object(O.c)(j),!o.isAuthenticated)return Object(R.jsx)(l.a,{to:"/login"})}),[]),Object(a.useEffect)((function(){o.isAuthenticated&&Object(O.c)(j)}),[o]),Object(R.jsx)("div",{className:"App",children:Object(R.jsxs)(d.a,{children:[Object(R.jsx)(m,{}),Object(R.jsx)(l.d,{children:Object(R.jsx)(a.Suspense,{fallback:Object(R.jsx)(u.b,{className:e.backdrop,open:!0,children:Object(R.jsx)(s.a,{color:"primary"})}),children:Object(R.jsx)(I,{routes:Q})})})]})})},Y=r(95),q=r(177),M=r(193),V=r(195),W=Object(Y.b)(Object(q.a)({palette:{primary:{main:"#333333",dark:"#18181a",light:"#424242"},secondary:{main:"#fff",light:"#fff",dark:"#f5f5f5"}},typography:{h1:{fontSize:"2rem"},h2:{fontSize:"1.75rem"},h3:{fontSize:"1.6rem"},h4:{fontSize:"1.25rem"},h5:{fontSize:"1rem"},h6:{fontSize:"0.75rem"}}})),B=function(e){return Object(R.jsx)(M.a,{injectFirst:!0,children:Object(R.jsx)(V.a,{theme:W,children:e.children})})},H=r(104),K=r(99),X=r(114),Z=r(91),$=function(e){return Object(R.jsx)(B,{children:Object(R.jsx)(Z.b,{children:Object(R.jsx)(k.b,{children:Object(R.jsx)(N.b,{children:Object(R.jsx)(w.b,{children:Object(R.jsx)(G.b,{children:Object(R.jsx)(H.a,{children:Object(R.jsx)(P.b,{children:Object(R.jsx)(K.b,{children:Object(R.jsx)(X.b,{children:Object(R.jsx)(L.b,{children:e.children})})})})})})})})})})})};r(160);o.a.render(Object(R.jsx)(n.a.StrictMode,{children:Object(R.jsx)($,{children:Object(R.jsx)(J,{})})}),document.getElementById("root"))},48:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r(10),n=r(0),c=r(1),o={isAuthenticated:!1,userDetails:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):"",token:localStorage.getItem("token")?JSON.parse(localStorage.getItem("token")):"",loading:!1,error:null,message:null},u=function(e,t){switch(console.log("Action: ",t),t.type){case"LOGIN_REQUEST":return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case"LOGIN_SUCCESS":return Object(c.a)(Object(c.a)({},e),{},{isAuthenticated:!0,userDetails:t.payload.user,token:t.payload.token,loading:!1,error:null,message:null});case"LOGIN_FAILED":return Object(c.a)(Object(c.a)({},e),{},{isAuthenticated:!1,loading:!1,error:t.error.type,message:t.error.msg});case"LOGOUT":return Object(c.a)(Object(c.a)({},e),{},{isAuthenticated:!1,userDetails:"",token:""});case"REGISTER_REQUEST":return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case"REGISTER_SUCCESS":return Object(c.a)(Object(c.a)({},e),{},{error:null,message:t.payload,loading:!1});case"REGISTER_FAILED":return Object(c.a)(Object(c.a)({},e),{},{error:t.payload.error.type,message:t.payload.error.msg,loading:!1});default:return e}},s=r(2),i=Object(n.createContext)();t.b=function(e){var t=Object(n.useReducer)(u,o),r=Object(a.a)(t,2),c=r[0],l=r[1];return Object(s.jsx)(i.Provider,{value:{user:c,dispatch:l},children:e.children})}},59:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var a=r(10),n=r(0),c=(r(63),r(8)),o=r(1),u={cartObj:JSON.parse(localStorage.getItem("cart"))||[],loading:!1,error:null},s=function(e,t){switch(console.log(t),t.type){case"GET_CART_REQUEST":return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case"GET_CART_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{cartObj:t.payload.cartItems,loading:!1});case"ADD_TO_CART_REQUEST":return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case"ADD_TO_CART_SUCCESS":var r=Object(c.a)(e.cartObj),a=t.payload.cartItem,n=a.product,s=a.quantity,i=a.price;if(0===r.length)r.push({product:n,quantity:s,price:i});else{var l=r.findIndex((function(e){return e.product._id===n._id}));l>-1?r[l]=Object(o.a)(Object(o.a)({},r[l]),{},{quantity:r[l].quantity+Number(s),price:r[l].price+i}):r.push({product:n,quantity:s,price:i})}return Object(o.a)(Object(o.a)({},e),{},{cartObj:r,loading:!1});case"UPDATE_CART_ITEM_REQUEST":return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case"UPDATE_CART_ITEM_SUCCESS":var d=t.payload.cartItem,p=Object(c.a)(e.cartObj),O=p.findIndex((function(e){return e.product._id===d.productUpdate._id}));return O>-1&&(p[O]=Object(o.a)(Object(o.a)({},p[O]),{},{quantity:d.quantityUpdate,price:d.priceUpdate})),Object(o.a)(Object(o.a)({},e),{},{cartObj:p,loading:!1});case"REMOVE_CART_ITEM_REQUEST":return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case"REMOVE_CART_ITEM_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{loading:!1,cartObj:e.cartObj.filter((function(e){return e.product._id!==t.payload._id}))});case"CLEAR_CART_REQUEST":return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case"CLEAR_CART_SUCCESS":return{cartObj:[],loading:!1,error:null};default:return u}},i=(r(48),r(2)),l=Object(n.createContext)();t.b=function(e){var t=Object(n.useReducer)(s,u),r=Object(a.a)(t,2),c=r[0],o=r[1];return Object(i.jsx)(l.Provider,{value:{cart:c,cartDispatch:o},children:e.children})}},60:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var a=r(10),n=r(0),c=r(8),o=r(1),u={products:[],loading:!1,error:null},s=function(e,t){switch(console.log(t),t.type){case"GET_ALL_PRODUCT_REQUEST":return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case"GET_ALL_PRODUCT_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{products:t.payload.products,loading:!1});case"GET_ALL_PRODUCT_FAILED":return Object(o.a)(Object(o.a)({},e),{},{loading:!1,error:t.payload.error});case"GET_PRODUCT_REQUEST":return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case"GET_PRODUCT_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{products:t.payload.products,loading:!1});case"GET_PRODUCT_RELATE_REQUEST":return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case"GET_PRODUCT_RELATE_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{products:t.payload.products,loading:!1});case"ADD_NEW_PRODUCT_REQUEST":return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case"ADD_NEW_PRODUCT_SUCCESS":var r=Object(c.a)(e.products);return r.unshift(t.payload.product),Object(o.a)(Object(o.a)({},e),{},{products:r,loading:!1});case"ADD_NEW_PRODUCT_FAILED":return Object(o.a)(Object(o.a)({},u),{},{error:t.payload.error});case"UPDATE_PRODUCT_REQUEST":return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case"UPDATE_PRODUCT_SUCCESS":var a=t.payload.product,n=a.productImages,s=a.category,i=a.name,l=a._id,d=a.slug,p=a.price,O=a.quantity,b=a.description,f=a.size,E=a.weight,j=a.brand,g=a.magnet,_=Object(c.a)(e.products),h=_.findIndex((function(e){return e._id===l}));return _[h]=Object(o.a)(Object(o.a)({},_[h]),{},{name:i,category:s,productImages:n,slug:d,price:p,quantity:O,description:b,size:f,weight:E,brand:j,magnet:g}),Object(o.a)(Object(o.a)({},e),{},{products:_,loading:!1});case"DELETE_PRODUCT_REQUEST":return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case"DELETE_PRODUCT_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{products:e.products.filter((function(e){return e._id!==t.payload._id})),loading:!1});default:return u}},i=r(2),l=Object(n.createContext)();t.b=function(e){var t=Object(n.useReducer)(s,u),r=Object(a.a)(t,2),c=r[0],o=r[1];return Object(i.jsx)(l.Provider,{value:{product:c,productDispatch:o},children:e.children})}},61:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var a=r(10),n=r(0),c=r(1),o=r(62),u=r(8),s={categories:[],loading:!1,error:null},i=function e(t,r,a){var n=a._id,s=a.name,i=a.slug;if(void 0==t)return[].concat(Object(u.a)(r),[{_id:n,name:s,slug:i,children:[]}]);var l,d=[],p=Object(o.a)(r);try{for(p.s();!(l=p.n()).done;){var O=l.value;if(O._id===t){var b={_id:n,name:s,slug:i,parentId:t,children:[]};d.push(Object(c.a)(Object(c.a)({},O),{},{children:O.children.length>0?[].concat(Object(u.a)(O.children),[b]):[b]}))}else d.push(Object(c.a)(Object(c.a)({},O),{},{children:O.children?e(t,O.children,a):[]}))}}catch(f){p.e(f)}finally{p.f()}return d},l=function e(t,r){var a,n=Object(o.a)(t);try{for(n.s();!(a=n.n()).done;){var c=a.value;if(c._id===r._id)return c.name=r.name,c.slug=r.slug,c.parentId=r.parentId,t;c.children.length>0&&e(c.children,r)}}catch(u){n.e(u)}finally{n.f()}return t},d=function e(t,r){var a,n=Object(o.a)(t);try{for(n.s();!(a=n.n()).done;){var c=a.value;if(c._id===r)return t.filter((function(e){return e._id!==r}));if(c.children.length>0){var u=e(c.children,r);c.children=u}}}catch(s){n.e(s)}finally{n.f()}return t},p=function(e,t){switch(console.log(t),t.type){case"GET_ALL_CATEGORY_REQUEST":return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case"GET_ALL_CATEGORY_SUCCESS":return Object(c.a)(Object(c.a)({},e),{},{categories:t.payload.categories,loading:!1});case"GET_ALL_CATEGORY_FAILED":return Object(c.a)(Object(c.a)({},e),{},{loading:!1,error:t.payload.error});case"ADD_NEW_CATEGORY_REQUEST":return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case"ADD_NEW_CATEGORY_SUCCESS":var r=t.payload.category,a=i(r.parentId,e.categories,r);return Object(c.a)(Object(c.a)({},e),{},{categories:a,loading:!1});case"ADD_NEW_CATEGORY_FAILED":return Object(c.a)(Object(c.a)({},e),{},{error:t.payload.error});case"UPDATE_CATEGORY_REQUEST":return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case"UPDATE_CATEGORY_SUCCESS":var n=l(e.categories,t.payload.category);return Object(c.a)(Object(c.a)({},e),{},{categories:n,loading:!1});case"UPDATE_CATEGORY_FAILED":return Object(c.a)(Object(c.a)({},e),{},{error:t.payload.error});case"DELETE_CATEGORY_REQUEST":return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case"DELETE_CATEGORY_SUCCESS":var o=d(e.categories,t.payload._id);return Object(c.a)(Object(c.a)({},e),{},{categories:o,loading:!1});case"DELETE_CATEGORY_FAILED":return Object(c.a)(Object(c.a)({},e),{},{error:t.payload.error,loading:!1});default:return s}},O=r(2),b=Object(n.createContext)();t.b=function(e){var t=Object(n.useReducer)(p,s),r=Object(a.a)(t,2),c=r[0],o=r[1];return Object(O.jsx)(b.Provider,{value:{category:c,categoryDispatch:o},children:e.children})}},63:function(e,t,r){"use strict";r.d(t,"c",(function(){return u})),r.d(t,"a",(function(){return s})),r.d(t,"e",(function(){return i})),r.d(t,"d",(function(){return l})),r.d(t,"b",(function(){return d}));var a=r(4),n=r.n(a),c=r(6),o=r(9),u=function(){var e=Object(c.a)(n.a.mark((function e(t){var r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"GET_CART_REQUEST"}),r={method:"GET",url:"/api/cart/get"},e.next=5,Object(o.a)(r);case 5:a=e.sent,console.log("Res cart: ",a.data),200===a.status&&t({type:"GET_CART_SUCCESS",payload:{cartItems:a.data.cart_db.cartItems}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(c.a)(n.a.mark((function e(t,r){var a,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Payload card: ",r),e.prev=1,t({type:"ADD_TO_CART_REQUEST"}),null==localStorage.getItem("user")){e.next=10;break}return a={method:"POST",url:"/api/cart/addtocart",data:{cartItems:r.cartItem}},e.next=8,Object(o.a)(a);case 8:c=e.sent,console.log(c);case 10:t({type:"ADD_TO_CART_SUCCESS",payload:{cartItem:r.cartItem}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,r){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(n.a.mark((function e(t,r){var a,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Payload card: ",r),e.prev=1,t({type:"UPDATE_CART_ITEM_REQUEST"}),null==localStorage.getItem("user")){e.next=10;break}return a={method:"POST",url:"/api/cart/addtocart",data:{cartItems:{price:r.cartItem.priceUpdate,product:r.cartItem.productUpdate,quantity:r.cartItem.quantityUpdate}}},e.next=8,Object(o.a)(a);case 8:c=e.sent,console.log(c);case 10:t({type:"UPDATE_CART_ITEM_SUCCESS",payload:{cartItem:r.cartItem}}),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(1);case 15:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,r){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(n.a.mark((function e(t,r){var a,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t({type:"REMOVE_CART_ITEM_REQUEST"}),null==localStorage.getItem("user")){e.next=9;break}return a={method:"DELETE",url:"/api/cart/"+r._id},e.next=7,Object(o.a)(a);case 7:c=e.sent,console.log("Res cart: ",c);case 9:t({type:"REMOVE_CART_ITEM_SUCCESS",payload:{_id:r._id}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(n.a.mark((function e(t){var r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t({type:"CLEAR_CART_REQUEST"}),null==localStorage.getItem("user")){e.next=9;break}return r={method:"DELETE",url:"/api/cart/destroy"},e.next=7,Object(o.a)(r);case 7:a=e.sent,console.log("Res cart: ",a);case 9:t({type:"CLEAR_CART_SUCCESS"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},64:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r(10),n=r(0),c=r(1),o={isAuthenticated:!1,userDetails:localStorage.getItem("a_user")?JSON.parse(localStorage.getItem("a_user")):"",token:localStorage.getItem("a_token")?JSON.parse(localStorage.getItem("a_token")):"",loading:!1,error:null,message:null},u=function(e,t){switch(console.log("Action: ",t),t.type){case"LOGIN_REQUEST":return Object(c.a)(Object(c.a)({},e),{},{isAuthenticated:!1,loading:!0});case"LOGIN_SUCCESS":return Object(c.a)(Object(c.a)({},e),{},{isAuthenticated:!0,userDetails:t.payload.user,token:t.payload.token,loading:!1,error:null,message:null});case"LOGIN_FAILED":return Object(c.a)(Object(c.a)({},e),{},{isAuthenticated:!1,loading:!1,error:t.error.type,message:t.error.msg});case"LOGOUT":return Object(c.a)(Object(c.a)({},e),{},{isAuthenticated:!1,userDetails:"",token:""});case"REGISTER_REQUEST":return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case"REGISTER_SUCCESS":return Object(c.a)(Object(c.a)({},e),{},{error:null,message:t.payload,loading:!1});case"REGISTER_FAILED":return Object(c.a)(Object(c.a)({},e),{},{error:t.payload.error.type,message:t.payload.error.msg,loading:!1});default:return e}},s=r(2),i=Object(n.createContext)();t.b=function(e){var t=Object(n.useReducer)(u,o),r=Object(a.a)(t,2),c=r[0],l=r[1];return Object(s.jsx)(i.Provider,{value:{aUser:c,aDispatch:l},children:e.children})}},65:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r(10),n=r(0),c=r(1),o={orders:[],loading:!1,error:null},u=function(e,t){console.log("Order admin action: ",t);var r,a=e.orders;switch(t.type){case"GET_ALL_ORDER_REQUEST":return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case"GET_ALL_ORDER_SUCCESS":return Object(c.a)(Object(c.a)({},e),{},{orders:t.payload.orders,loading:!1});case"UPDATE_ORDER_REQUEST":return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case"UPDATE_ORDER_SUCCESS":var n=t.payload.order;return r=a.map((function(e){return e._id==n._id?n:e})),Object(c.a)(Object(c.a)({},e),{},{orders:r,loading:!1});default:return o}},s=r(2),i=Object(n.createContext)();t.b=function(e){var t=Object(n.useReducer)(u,o),r=Object(a.a)(t,2),c=r[0],l=r[1];return Object(s.jsx)(i.Provider,{value:{orderAdmin:c,orderAdminDispatch:l},children:e.children})}},67:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a="http://localhost:5000/"},9:function(e,t,r){"use strict";var a=r(66),n=r.n(a),c=r(67),o=JSON.parse(window.localStorage.getItem("token"));console.log(o);var u=n.a.create({baseURL:c.a});t.a=u},91:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r(10),n=r(0),c=r(1),o={open:!1,message:"",type:""},u=function(e,t){switch(t.type){case"SET_OPEN":return Object(c.a)(Object(c.a)({},e),{},{open:!0,message:t.payload.msg,type:t.payload.type});case"SET_CLOSE":return Object(c.a)(Object(c.a)({},e),{},{open:!1});default:throw new Error("Invalid action!")}},s=r(2),i=Object(n.createContext)();t.b=function(e){var t=Object(n.useReducer)(u,o),r=Object(a.a)(t,2),c=r[0],l=r[1];return Object(s.jsx)(i.Provider,{value:{openSnackbar:c,openSnackbarDispatch:l},children:e.children})}},93:function(e,t,r){"use strict";r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return d})),r.d(t,"e",(function(){return p})),r.d(t,"h",(function(){return O})),r.d(t,"f",(function(){return b})),r.d(t,"g",(function(){return E})),r.d(t,"a",(function(){return j})),r.d(t,"j",(function(){return g})),r.d(t,"b",(function(){return _})),r.d(t,"i",(function(){return h}));var a=r(1),n=r(4),c=r.n(n),o=r(8),u=r(6),s=r(9),i=r(13),l=function(){var e=Object(u.a)(c.a.mark((function e(t){var r,a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_ALL_PRODUCT_REQUEST"}),r={method:"GET",url:"/api/product/get"},e.next=4,Object(s.a)(r);case 4:a=e.sent,console.log(a),200===a.status?(n=Object(o.a)(a.data.product_db),a.data.product_db.map((function(e,t){n[t].ratingView=f(e.ratings)})),t({type:"GET_ALL_PRODUCT_SUCCESS",payload:{products:n}})):t({type:"GET_ALL_PRODUCT_FAILED",payload:{error:a.data.error}});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(u.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("/api/product/get");case 3:if(200!=(t=e.sent).status){e.next=8;break}return r=Object(o.a)(t.data.product_db),t.data.product_db.map((function(e,t){r[t].ratingView=f(e.ratings)})),e.abrupt("return",r.slice(0,6));case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),new Error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("/api/product/get?sort=-offer");case 3:if(200!=(t=e.sent).status){e.next=8;break}return r=Object(o.a)(t.data.product_db),t.data.product_db.map((function(e,t){r[t].ratingView=f(e.ratings)})),e.abrupt("return",r.slice(0,6));case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),new Error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(c.a.mark((function e(t){var r,a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("/api/product/get?category=".concat(t.slug));case 3:if(r=e.sent,console.log(r),200!=r.status){e.next=10;break}return a=Object(o.a)(r.data.product_db),r.data.product_db.map((function(e,t){a[t].ratingView=f(e.ratings)})),n=r.data.product_db.filter((function(e){return e._id!=t.id})),e.abrupt("return",n);case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),new Error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(u.a)(c.a.mark((function e(t,r){var a,n,u,i,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("payload: ",r),a=[],r.filterArr.forEach((function(e){for(var t in e)null!=e[t]&&a.push(e)})),n="",a.length>0&&a.forEach((function(e){for(var t in e)if("price"==t){switch(e[t]){case"lt1":e[t]="price[lt]=100001";break;case"1to2":e[t]="price[gt]=100000&price[lt]=200001";break;case"2to5":e[t]="price[gt]=200000&price[lt]=500001";break;case"5to10":e[t]="price[gt]=500000&price[lt]=1000001";break;case"gt10":e[t]="price[gt]=1000000"}n+="".concat(e[t],"&")}else n+="".concat(t,"=").concat(e[t],"&")})),u=n.slice(0,n.length-1),console.log(u),e.prev=7,t({type:"GET_PRODUCT_REQUEST"}),i={method:"GET",url:"/api/product/get?"+u},e.next=12,Object(s.a)(i);case 12:l=e.sent,d=Object(o.a)(l.data.product_db),l.data.product_db.map((function(e,t){d[t].ratingView=f(e.ratings)})),200===l.status&&t({type:"GET_PRODUCT_SUCCESS",payload:{products:d}}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(7),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[7,18]])})));return function(t,r){return e.apply(this,arguments)}}(),f=function(e){var t=e.length;return{rate:e.reduce((function(e,t){return Number(e)+Number(t.rating)}),0)/t||0,quantity:t}},E=function(){var e=Object(u.a)(c.a.mark((function e(t){var r,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={method:"GET",url:"/api/product/"+t},e.next=4,Object(s.a)(r);case 4:if(200!==(n=e.sent).status){e.next=10;break}return console.log(n),(o=Object(a.a)({},n.data.product)).ratingView=f(o.ratings),e.abrupt("return",o);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(c.a.mark((function e(t,r,a){var n,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},r.forEach((function(e,t){n[t]=e})),e.prev=2,t({type:"ADD_NEW_PRODUCT_REQUEST"}),o={method:"POST",url:"/api/product/add",data:n},e.next=7,Object(i.a)(o);case 7:u=e.sent,console.log("Res: ",u),201===u.status&&(t({type:"ADD_NEW_PRODUCT_SUCCESS",payload:{product:u.data.product}}),a({type:"SET_OPEN",payload:{msg:"\u0110\xe3 c\u1eadp nh\u1eadt!",type:"success"}})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),t({type:"ADD_NEW_PRODUCT_FAILED",payload:{error:e.t0.response.data}}),a({type:"SET_OPEN",payload:{msg:"\u0110\xe3 x\u1ea3y ra l\u1ed7i!",type:"error"}});case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,r,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(c.a.mark((function e(t,r,a){var n,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},r.forEach((function(e,t){n[t]=e})),e.prev=2,t({type:"UPDATE_PRODUCT_REQUEST"}),o={method:"PUT",url:"/api/product/"+n._id,data:n},e.next=7,Object(i.a)(o);case 7:200===(u=e.sent).status&&(t({type:"UPDATE_PRODUCT_SUCCESS",payload:{product:u.data.product}}),a({type:"SET_OPEN",payload:{msg:"\u0110\xe3 c\u1eadp nh\u1eadt!",type:"success"}})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),a({type:"SET_OPEN",payload:{msg:"\u0110\xe3 x\u1ea3y ra l\u1ed7i!",type:"error"}});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,r,a){return e.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(c.a.mark((function e(t,r,a){var n,o,u,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={method:"DELETE",url:"/api/product/"+r._id},t({type:"DELETE_PRODUCT_REQUEST"}),e.next=5,Object(i.a)(n);case 5:if(o=e.sent,console.log(o),200!==o.status){e.next=16;break}return u=[],r.image.map((function(e){u.push(e.public_id)})),e.next=12,i.a.post("/api/delete",{public_id:u});case 12:s=e.sent,console.log(s),t({type:"DELETE_PRODUCT_SUCCESS",payload:{_id:o.data.data._id}}),a({type:"SET_OPEN",payload:{msg:"\u0110\xe3 c\u1eadp nh\u1eadt!",type:"success"}});case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0),a({type:"SET_OPEN",payload:{msg:"\u0110\xe3 x\u1ea3y ra l\u1ed7i!",type:"error"}});case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,r,a){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(c.a.mark((function e(t){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={method:"GET",url:"/api/product/get?slug[regex]="+t.key.toLowerCase()},e.next=4,Object(i.a)(r);case 4:return a=e.sent,e.abrupt("return",a.data.product_db);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},96:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return i})),r.d(t,"b",(function(){return l}));var a=r(4),n=r.n(a),c=r(6),o=r(13),u=function(){var e=Object(c.a)(n.a.mark((function e(t,r){var a,c,u,s,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOGIN_REQUEST"}),a={method:"POST",url:"/admin/login",data:r},e.next=5,Object(o.a)(a);case 5:c=e.sent,console.log("Data: ",c),200===c.status&&(u=c.data,s=u.token,i=u.user,console.log(c.data),t({type:"LOGIN_SUCCESS",payload:{token:s,user:i}}),localStorage.setItem("a_token",JSON.stringify(s)),localStorage.setItem("a_user",JSON.stringify(i)),o.a.defaults.headers.common.Authorization=s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:"LOGIN_FAILED",error:e.t0.response.data});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r){return e.apply(this,arguments)}}(),s=function(){var e=Object(c.a)(n.a.mark((function e(t,r){var a,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.role="admin",e.prev=1,t({type:"REGISTER_REQUEST"}),a={method:"POST",url:"/admin/register",data:r},e.next=6,Object(o.a)(a);case 6:c=e.sent,console.log(c),201===c.status&&t({type:"REGISTER_SUCCESS",payload:c.data.msg}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t({type:"REGISTER_FAILED",payload:{error:e.t0.response.data}});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,r){return e.apply(this,arguments)}}(),i=function(e){try{var t=JSON.parse(localStorage.getItem("a_token"));if(t)e({type:"LOGIN_SUCCESS",payload:{token:t,user:JSON.parse(localStorage.getItem("a_user"))}}),o.a.defaults.headers.common.Authorization=t}catch(r){e({type:"LOGIN_FAILED",error:r.response.data})}},l=function(){var e=Object(c.a)(n.a.mark((function e(t,r,a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT"}),r({type:"undefined"}),a({type:"undefined"}),localStorage.removeItem("a_token"),localStorage.removeItem("a_user");case 5:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}()},97:function(e,t,r){"use strict";r.d(t,"d",(function(){return u})),r.d(t,"f",(function(){return s})),r.d(t,"b",(function(){return i})),r.d(t,"e",(function(){return l})),r.d(t,"c",(function(){return d})),r.d(t,"a",(function(){return p}));var a=r(4),n=r.n(a),c=r(6),o=r(9),u=function(){var e=Object(c.a)(n.a.mark((function e(t,r,a){var c,u,s,i,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOGIN_REQUEST"}),c={method:"POST",url:"/user/login",data:r},e.next=5,Object(o.a)(c);case 5:u=e.sent,console.log("Data: ",u),200===u.status&&(s=u.data,i=s.token,l=s.user,console.log(u.data),t({type:"LOGIN_SUCCESS",payload:{token:i,user:l}}),a({type:"SET_OPEN",payload:{msg:"\u0110\xe3 \u0111\u0103ng nh\u1eadp!",type:"success"}}),localStorage.setItem("token",JSON.stringify(i)),localStorage.setItem("user",JSON.stringify(l)),o.a.defaults.headers.common.Authorization=i),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:"LOGIN_FAILED",error:e.t0.response.data});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r,a){return e.apply(this,arguments)}}(),s=function(){var e=Object(c.a)(n.a.mark((function e(t,r,a,c){var u,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.role="user",e.prev=1,t({type:"REGISTER_REQUEST"}),u={method:"POST",url:"/user/register",data:r},e.next=6,Object(o.a)(u);case 6:s=e.sent,console.log(s),201===s.status&&(t({type:"REGISTER_SUCCESS",payload:s.data.msg}),a({type:"SET_OPEN",payload:{msg:"\u0110\u0103ng k\xfd th\xe0nh c\xf4ng!",type:"success"}}),c.push("/")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t({type:"REGISTER_FAILED",payload:{error:e.t0.response.data}});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,r,a,n){return e.apply(this,arguments)}}(),i=function(e){try{var t=JSON.parse(localStorage.getItem("token"));if(t)e({type:"LOGIN_SUCCESS",payload:{token:t,user:JSON.parse(localStorage.getItem("user"))}}),o.a.defaults.headers.common.Authorization=t;else console.log("No token isLogin")}catch(r){e({type:"LOGIN_FAILED",error:r.response.data})}},l=function(){var e=Object(c.a)(n.a.mark((function e(t,r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT"}),r({type:"SET_OPEN",payload:{msg:"\u0110\xe3 \u0111\u0103ng xu\u1ea5t!",type:"success"}}),localStorage.removeItem("token"),localStorage.removeItem("user");case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(n.a.mark((function e(t,r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(t.ratings.map(function(){var e=Object(c.a)(n.a.mark((function e(t,r){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/user/rating",t);case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())).then((function(){r({type:"SET_OPEN",payload:{msg:"\u0110\xe3 \u0111\xe1nh gi\xe1!",type:"success"}})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(n.a.mark((function e(t,r){var a,c,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.password,c=t.newPassword,e.prev=1,e.next=4,o.a.put("/user/changepassword",{password:a,newPassword:c});case 4:if(200!=(u=e.sent).status){e.next=7;break}return e.abrupt("return",{msg:u.data.msg});case 7:e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",{error:e.t0.response.data.msg,type:e.t0.response.data.type});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}()},99:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r(10),n=r(0),c=r(1),o={address:[],error:null,loading:!1},u=function(e,t){switch(console.log("Address action: ",t),t.type){case"GET_USER_ADDRESS_REQUEST":return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case"GET_USER_ADDRESS_SUCCESS":return Object(c.a)(Object(c.a)({},e),{},{address:t.payload.address.address,loading:!1});case"ADD_USER_ADDRESS_REQUEST":return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case"ADD_USER_ADDRESS_SUCCESS":return Object(c.a)(Object(c.a)({},e),{},{address:t.payload.address,loading:!1});case"DELETE_USER_ADDRESS_REQUEST":return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case"DELETE_USER_ADDRESS_SUCCESS":return Object(c.a)(Object(c.a)({},e),{},{address:t.payload.address,loading:!1});case"CLEAR_ADDRESS_SUCCESS":return{initialState:o}}},s=r(2),i=Object(n.createContext)();t.b=function(e){var t=Object(n.useReducer)(u,o),r=Object(a.a)(t,2),c=r[0],l=r[1];return Object(s.jsx)(i.Provider,{value:{address:c,addressDispatch:l},children:e.children})}}},[[161,6,11]]]);
//# sourceMappingURL=main.ffd133c0.chunk.js.map